<div class="scene col-md-5 column nopadding" style="padding-left:10px" ng-controller="SceneCtrl"
     xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
    <label class="viewname">{{frm.srcName || 'Scene'}}</label>

    <span class="glyphicon glyphicon-search"
          ng-model="mode"
          ng-style="zoomIconStyle"
          ng-init="zoomIconStyle={'color':'gray'}"
          ng-click="setMode('view');
          brushIconStyle={'color':'gray'};
          zoomIconStyle={'color': 'orange'}"
          style="margin-left:45%"></span>
    <!--zoomStyle={'z-index':14}"-->

    <span class="fa fa-paint-brush"
          ng-model="mode"
          ng-style="brushIconStyle"
          ng-init="brushIconStyle={'color' :'orange'}"
          ng-click="setMode('selection');
          brushIconStyle={'color': 'orange'};
          zoomIconStyle={'color':'gray'};">
    </span>
    <!--brushStyle={'z-index' : 14};-->

    <span class="glyphicon glyphicon-repeat"
          ng-click="resetView()">
           </span>

    <div id="scene" class="img-with-label">

        <scene-frame class="stacked"  width="650" height="500"
                     ng-style="imgStyle">
        </scene-frame>


        <!--ng-init="imgStyle={'z-index':1}" >-->

        <heatview  id="heatmap" class="stacked" width="650" height="500" colormap="1"
                   domain='domain()'
                   points='points'
                   ng-style="heatmapStyle"
                   ng-show="showHeatmap"></heatview>


        <heatview  id="fixation-heatmap" class="stacked" width="650" height="500" colormap="0"
                   domain='domain()'
                   points='fixations'
                   ng-style="fixationStyle"
                   ng-show='showFixationHeatmap'>
        </heatview>


        <heatview  id="saccade-heatmap" class="stacked" width="650" height="500"
                   colormap="2"
                   domain='domain()'
                   points='saccades'
                   ng-style="saccadeStyle"
                   ng-show="showSaccadeHeatmap">
        </heatview>

        <!--ng-init="saccadeStyle={'z-index':4}"-->

        <sp id="scatterplot" class="stacked" width="650" height="500"
            ng-style="spStyle">
        </sp>

        <!--ng-init="spStyle={'z-index':5}">-->


        <alphapart id="alphapart" class="stacked" width="650" height="500"
                   ng-style="alphapartStyle"
                   data="scanPathPoints"
                   alpha="alpha.value"
                   domain="domain()"
                   ng-show="alpha.partition">
        </alphapart>

        <directedpath id="saccadepath" class="stacked saccadepath" width="650" height="500"
                      data='saccadePathPoints'
                      domain='domain()'
                      ng-show="showSaccadePath"
                      ng-style="pathStyle">
        </directedpath>


        <directedpath id="directedpath" class="stacked scanpath" width="650" height="500"
                      data='scanPath'
                      domain='domain()'
                      click='onFixationEdgeClick(d,i)'
                      ng-show="showScanPath"
                      ng-style="pathStyle">
        </directedpath>


        <circularnodes id="circularnodes" class="stacked nodes" width="650" height="500"
                       data='scanPath'
                       domain='domain()'
                       tooltip="scanPathTooltip"
                       click='onFixationClick(d,i)'
                       ng-style="nodeStyle"
                       ng-show="showScanPath">
        </circularnodes>



        <!--ng-init="nodeStyle={'z-index':7}"-->
        <!--<textlabel id="textlabel" class="stacked" width="650" height="500"-->
        <!--domain='domain()'-->
        <!--data='scanPath'-->
        <!--ng-style="labelStyle"-->
        <!--ng-init="labelStyle={'z-index' : 8}"-->
        <!--ng-show="showScanPath">-->
        <!--</textlabel>-->

        <brush id="sp" class="stacked" width="650" height="500"
               ng-style="brushStyle"
               ng-show="showTracking">
        </brush>

        <!--ng-init="brushStyle={'z-index' : 10}"-->

        <zoom id="scene-zoom" class="stacked" width="650" height="500"
              ng-style="zoomStyle"
              ng-show="mode==='view'"
              ng-click="clickPropagate('scene-zoom', 'circularnodes'); clickPropagate('scene-zoom', 'directedpath')">
        </zoom>
        <!--ng-init="zoomStyle={'z-index' : 11; 'pointer-events}"-->

    </div>

    <div class="scene-info">

        <div ng-show="frm.img.src">

            <fieldset id="scene-ctrls-0">

                <div class="divtable">

                    <div class="row heading">
                        <div class="column"> </div>
                        <div class="column" title="Scatter">scatter</div>
                        <div class="column" title="Heatmap ">heatmap</div>
                        <div class="column" title="Directed path">path</div>
                    </div>

                    <div class="row row-1">
                        <div class="column column-0">all</div>
                        <div class="column column-1">
                            <input type="checkbox" titlex='Show all tracking points'
                                   ng-model="showTracking"
                                   ng-click="imgStyle={'opacity':showTracking ? 1 : 0.5}">
                        </div>
                        <div class="column column-2">
                            <input type="checkbox" titlex='Show heatmap of tracking points' ng-model="showHeatmap">
                        </div>
                        <div class="column column-3">
                            <input type="checkbox" titlex='Show scan-path' ng-model="showScanPath">
                        </div>
                    </div>

                    <div class="row row-2">
                        <div class="column column-0">fixations</div>
                        <div class="column column-1">
                            <input type="checkbox" titlex='Show scatter plot of fixations'
                                   ng-model="showFixations"
                                   ng-change="fixationVisibility()">
                        </div>
                        <div class="column column-2">
                            <input type="checkbox" titlex="Show heatmap of fixations"
                                   ng-model="showFixationHeatmap">
                        </div>
                        <div class="column column-3" >
                            <input type="checkbox">
                        </div>
                    </div>

                    <div class="row row-3">
                        <div class="column column-0">saccades</div>
                        <div class="column column-1">
                            <input type="checkbox" titlex='Show scatter plot of saccades'
                                   ng-model="showSaccades"
                                   ng-change="saccadeVisibility()">
                        </div>
                        <div class="column column-2">
                            <input type="checkbox" titlex='Show heatmap of saccades'
                                   ng-model="showSaccadeHeatmap">
                        </div>
                        <div class="column column-3">
                            <input type="checkbox" titlex='Show saccade path'
                                   ng-model="showSaccadePath">
                        </div>
                    </div>

                </div>

            </fieldset>


            <fieldset id="scene-ctrls-1">

                <div class="divtable">
                    <div class="row heading">
                        <div class="column">velocity threshold</div>
                    </div>
                    <div class="row row-1">
                        <div class="column">
                            <label class="numinput">min:</label><input type="number"  value="{{velocity.min}}" ng-model="velocity.min">
                            <label class="numinput">step:</label><input type="number" value="{{velocity.step}}" ng-model="velocity.step">
                            <label class="numinput">max:</label><input type="number"  value="{{velocity.max}}" ng-model="velocity.max">
                        </div>
                    </div>
                    <div class="row row-2">
                        <div class="column">
                            <input type="range"
                                   min="{{velocity.min}}"
                                   step="{{velocity.step}}"
                                   max="{{velocity.max}}"
                                   value="{{velocity.threshold}}"
                                   ng-model="velocity.threshold"
                                   ng-change="classify()"/>
                            <label class="center">{{velocity.threshold}}</label>
                        </div>
                    </div>
                </div>
            </fieldset>

            <fieldset id="scene-ctrls-2">
                <div class="divtable">
                    <div class="row heading">
                        <div class="column column-0" ></div>
                        <div class="column" title="scene">scene</div> <div class="column column-0" ></div>
                        <div class="column" title="circle">circle</div>
                    </div>

                    <div class="row row-1">
                        <div class="column column-0" title="opacity">opacity</div>
                        <div class="column" title="scene opacity">
                            <input type="range" min="0" step="0.05" max="1.0"
                                   ng-model="imgOpacity"
                                   ng-init="imgOpacity=1;imgStyle={'opacity':imgOpacity}"
                                   ng-change="imgStyle={'opacity':imgOpacity}"/>
                        </div>
                        <div class="column column-0" title="opacity">opacity</div>
                        <div class="column column-1" title="circle opacity">
                            <input type="range"  min="0" step="0.05" max="1.0"
                                   ng-model="spOpacity"
                                   ng-init="spOpacity=1.0"
                                   ng-change="spStyle={'opacity':spOpacity}"/>
                        </div>
                    </div>

                    <div class="row row-2">
                        <div class="column column-0" title="blur">blur</div>
                        <div class="column " title="scene blur">
                            <input type="range"  min="0" step="0.25" max="10"
                                   ng-model="spBlur" ng-init="spBlur=0"
                                   ng-change="imgStyle={'filter':'blur('+spBlur+')', '-webkit-filter': 'blur('+spBlur+'px)'}"/>
                        </div>
                        <div class="column column-0" title="blur">size</div>
                        <div class="column" title="circle size">
                            <input type="range" min="0" step="0.25" max="40"
                                   value="10"
                                   ng-model="sp.markerSize"
                                   ng-init="s.markerSize=10"/>
                        </div>
                    </div>
                </div>
            </fieldset>


        </div>
    </div>
</div>
</div>
