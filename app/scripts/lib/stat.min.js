!function(){function r(r){var n=r.length,t=0,e=0;if(2>n)return r[0];for(;n>e;e++)t+=(r[e]-t)/(e+1);return t}function n(r){var n=r.length;if(1===n)return{val:r[0],array:r};var t=r.sort(l.numeric),a=e(t,.5);return{val:a,array:t}}function t(r,t){var e,a,o=r.length,i=r[0].length;if(0===t)for(a=l.array(i),e=0;i>e;e++)a[e]=n(l.slice(r,t,e)).val;else for(a=l.array(o),e=0;o>e;e++)a[e]=n(l.slice(r,t,e)).val;return a}function e(r,n){var t=r.length,e=n*(t-1),a=Math.floor(e),o=a+1,i=e-a;return(1-i)*r[a]+i*r[o]}function a(r){var n,t=r.length,e=0,a=0;if(2>t)return{val:a,mean:r[0]};var o=l.mean(r),i=o*o;for(n=0;t>n;n++)e+=r[n]*(r[n]-2*o);return a=(e+t*i)/(t-1),{val:a,mean:o}}function o(r){return 0===r?0:Math.log(r)}function i(r,n){var t,e,a=r.length,i=0;for(t=0;a>t;t++)e=n(r(t)),i+=e*o(e);return-i}function u(r,n){for(var t,e=r.length,a=(r[e-1]-r[0])/n,o=l.array(n,0),i=0,u=0,f=0;n>i;i++){for(f=r[0]+(i+1)*a;r[u]<=f&&(t=u++<e);)++o[i];if(!t)break}return o}function f(r,n){var t=r.length,e=2*l.iqr(r)/Math.pow(t,1/3),a=l.extrama(r),o=~~((a.max-a.min)/e);return o}function c(r,n,t,e){var a,o=r.length,i=l.extrama(r),u=(i.max-i.min)/n,f=l.extrama(t),c=(f.max-f.min)/e,m=n*e,g=l.array(m,0),h=0,v=0,s=0,d=l.array(n+1,0).map(function(r,n){return i.min+n*u}),y=l.array(e+1,0).map(function(r,n){return f.min+n*c});for(d[0]=-(1/0),d[n]=1/0,y[0]=-(1/0),y[e]=1/0;o>h;h++)for(a=0,s=0;e>s;s++)for(v=0;n>v;v++)r[h]>d[v]&&r[h]<=d[v+1]&&t[h]>y[s]&&t[h]<=y[s+1]&&df,++g[a],++a;return g}var l={version:"0.1.0"};l.extrama=function(r){if(arguments.length&&r){for(var n,t,e=r[0],a=e,o=r.length,i=o%2,u=1;o>u;u+=2)r[u]>r[u+1]?(n=r[u+1],t=r[u]):(n=r[u],t=r[u+1]),e=e>n?n:e,a=t>a?t:a;return i||(n=r[o-1],e>n?e=n:n>a&&(a=n)),{min:e,max:a}}},l.min=function(r){return l.extrama(r).min},l.max=function(r){return l.extrama(r).max},l.numeric=function(r,n){return r-n},l.initArray=function(r,n){var t,e=r.length;if("function"==typeof n)for(t=0;e>t;r[t++]=n(t));else for(t=0;e>t;r[t++]=n);return r},l.slice=function(r,n,t){if(1===n)return r.slice(t)[0];var e,a=r.length,o=l.array(a);for(e=0;a>e;e++)o[e]=r[e][t];return o},l.array=function(r,n){return 1===arguments.length?new Array(r):l.initArray(new Array(r),n)},l.range=function(r){var n,t=l.array(r);for(n=0;r>n;t[n]=n++);return t},l.uint8ClampedArray=function(r,n){return 1===arguments.length?new Uint8ClampedArray(r):l.initArray(new Uint8ClampedArray(r),n)},l.uint8Array=function(r,n){return 1===arguments.length?new Uint8Array(r):l.initArray(new Uint8Array(r),n)},l.uint8ArrayCopy=function(r){var n,t=r.length,e=new Uint8Array(t);for(n=0;t>n;n++)e[n]=r[n];return e},l.uint32Array=function(r,n){return 1===arguments.length?new Uint32Array(r):l.initArray(new Uint32Array(r),n)},l.uint32Range=function(r){var n,t=l.uint32Array(r);for(n=0;r>n;t[n]=n++);},l.float32Array=function(r,n){return 1===arguments.length?new Float32Array(r):l.initArray(new Float32Array(r),n)},l.equalArray=function(r,n){var t,e=r.length,a=n.length;if(e!==a)return!1;for(t=0;e>t;t++)if(r[t]!==n[t])return!1;return!0},l.mean=function(n,t){var e=arguments.length;return e&&n.length||console.error("Invalid parameter!"),r(n)},l.median=function(r,e){var a=arguments.length;return!a||!r.length||a>1&&e>1?console.error("Invalid parameter!"):1===a?n(r):t(r,e)},l.quant=function(r,n,t){return 3===arguments.length&&t>1&&n>0&&t>n?e(r.sort(l.numeric),n/t):void console.error("Invalid input args!")},l["var"]=function(r){return arguments.length&&r.length?a(r):void console.error("Invalid parameter!")},l.std=function(r){return Math.sqrt(l["var"](r).val)},l.entropy=function(r,n){2===arguments.length&&r.length?i(r,n):console.error("Invalid parameter!")},l.hist=function(r,n){if(arguments.length&&r&&r.length){var t=n||f(r,"fd");return u(r.sort(l.numeric),t)}},l.hist2=function(r,n,t,e){return arguments.length&&r&&n?(t=t||r,e=e||n,c(r,n,t,e)):void 0},l.intensity=function(){function r(r,i){console.log(i),e=r.append("canvas").attr("width",c).attr("height",m).node(),a=e.getContext("2d"),a.imageSmoothingEnabled=!1,o=a.createImageData(u,f),n(r.datum()),a.putImageData(o,0,0),t()}function n(r){var n,t,e,a,c=u*f,m=0,g=0,h=255;i=l.extrama(r),s.domain([i.min,i.max]);for(var v=o.data;c>m;m++,g+=4)n=d3.rgb(s(r[m])),t=Math.round(n.r),e=Math.round(n.g),a=Math.round(n.b),v[g]=t,v[g+1]=e,v[g+2]=a,v[g+3]=h}function t(){var r=g.domain(),n=g.range(),t=h.domain(),o=h.range();a.drawImage(e,r[0],t[0],r[1]-r[0],t[1]-t[0],n[0],o[0],n[1]-n[0],o[1]-o[0])}var e,a,o,i,u=256,f=256,c=u,m=f,g=d3.scale.linear().domain([0,u]).range([0,c]),h=d3.scale.linear().domain([0,f]).range([0,m]),v=["#000","#eee"],s=d3.scale.linear().range(v);return r.width=function(n){return arguments.length?(u=n,g.domain([0,u]),r):u},r.height=function(n){return arguments.length?(f=n,h.domain([0,f]),r):f},r.canvasWidth=function(n){return arguments.length?(c=n,g.range([0,c]),r):c},r.canvasHeight=function(n){return arguments.length?(m=n,h.range([0,m]),r):m},r},l.vector={},l.vector.add=function(r,n){var t,e=[],a=r.length;for(t=0;a>t;t++)e.push(r[t]+n[t]);return e},l.vector.scalar=function(r,n){var t,e=[],a=r.length;for(t=0;a>t;t++)e.push(n*r[t]);return e},l.vector.subtract=function(r,n){var t,e=[],a=r.length;for(t=0;a>t;t++)e.push(r[t]-n[t]);return e},l.vector.normSquared=function(r){var n,t=0,e=r.length;for(n=0;e>n;n++)t+=r[n]*r[n];return t},l.vector.norm=function(r){return Math.sqrt(l.vector.normSquared(r))},l.vector.normalize=function(r){var n,t=[],e=1/1024,a=l.vector.norm(r),o=r.length;if(e>a)return void console.error("The vector ["+r+"] has almost zero norm!");for(n=0;o>n;n++)t.push(r[n]/a);return t},l.vector.cross=function(r,n){return[r[1]*n[2]-r[2]*n[1],r[2]*n[0]-r[0]*n[2],r[0]*n[1]-r[1]*n[0]]},l.vector.dot=function(r,n){var t,e=r.length,a=0;for(t=0;e>t;t++)a+=r[t]*n[t];return a},l.vector.degree=function(r,n){return 180*(l.vector.radian(r,n)/Math.PI)},l.vector.radian=function(r,n){var t=l.vector.normalize,e=l.vector.dot,a=e(t(r),t(n));return-1>a?Math.PI:a>1?0:Math.acos(a)},l.matrix={},l.matrix["new"]=function(r,n,t){var e,a=[],o=t||0;for(e=0;r>e;e++)a.push(l.array(n,o));return a},l.matrix.assignScalar=function(r,n){var t,e,a=r.length,o=r[0].length;for(t=0;a>t;t++)for(e=0;o>e;e++)r[t][e]=n;return r},l.matrix.add=function(r,n){},l.matrix.scalar=function(r,n){},l.matrix.subtract=function(r,n){},"function"==typeof define&&define.amd?define(l):"object"==typeof module&&module.exports&&(module.exports=l),this.stat=l}();