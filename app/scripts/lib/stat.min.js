!function(){function r(r){var n=r.length,t=0,e=0;if(2>n)return r[0];for(;n>e;e++)t+=(r[e]-t)/(e+1);return t}function n(r){var n=r.length;if(1===n)return{val:r[0],array:r};var t=r.sort(c.numeric),e=stat_quant(t,.5);return{val:e,array:t}}function t(r){var n,t=r.length,e=0,a=0;if(2>t)return{val:a,mean:r[0]};var o=c.mean(r),i=o*o;for(n=0;t>n;n++)e+=r[n]*(r[n]-2*o);return a=(e+t*i)/(t-1),{val:a,mean:o}}function e(r){return 0===r?0:Math.log(r)}function a(r,n){for(var t,a=r.length,o=0,i=0;a>i;i++)t=n(r(i)),o+=t*e(t);return-o}function o(r,n){for(var t,e=r.length,a=(r[e-1]-r[0])/n,o=c.array(n,0),i=0,u=0,f=0;n>i;i++){for(f=r[0]+(i+1)*a;r[u]<=f&&(t=u++<e);)++o[i];if(!t)break}return o}function i(r,n){var t=r.length,e=2*c.iqr(r)/Math.pow(t,1/3),a=c.extrama(r),o=~~((a.max-a.min)/e);return o}function u(r,n,t,e){var a,o=r.length,i=c.extrama(r),u=(i.max-i.min)/n,f=c.extrama(t),m=(f.max-f.min)/e,l=n*e,g=c.array(l,0),v=0,h=0,d=0,s=c.array(n+1,0).map(function(r,n){return i.min+n*u}),y=c.array(e+1,0).map(function(r,n){return f.min+n*m});for(s[0]=-1/0,s[n]=1/0,y[0]=-1/0,y[e]=1/0;o>v;v++)for(a=0,d=0;e>d;d++)for(h=0;n>h;h++)r[v]>s[h]&&r[v]<=s[h+1]&&t[v]>y[d]&&t[v]<=y[d+1]&&++g[a],++a;return g}var c={version:"1.0.0"};c.extrama=function(r){if(arguments.length&&r){for(var n,t,e=r[0],a=e,o=r.length,i=o%2,u=1;o>u;u+=2)r[u]>r[u+1]?(n=r[u+1],t=r[u]):(n=r[u],t=r[u+1]),e=e>n?n:e,a=t>a?t:a;return i||(n=r[o-1],e>n?e=n:n>a&&(a=n)),{min:e,max:a}}},c.min=function(r){return c.extrama(r).min},c.max=function(r){return c.extrama(r).max},c.numeric=function(r,n){return r-n},c.initArray=function(r,n){for(var t=r.length,e=0;t>e;e++)r[e]=n;return r},c.array=function(r,n){return n?new Array(r):c.initArray(new Array(r),n)},c.uint8ClampedArray=function(r,n){return n?new Uint8ClampedArray(r):c.initArray(new Uint8ClampedArray(r),n)},c.uint8Array=function(r,n){return n?new Uint8Array(r):c.initArray(new Uint8Array(r),n)},c.uint32Array=function(r,n){return n?new Uint32Array(r):c.initArray(new Uint32Array(r),n)},c.float32Array=function(r,n){return n?new Float32Array(r):c.initArray(new Float32Array(r),n)},c.equalArray=function(r,n){var t=r.length,e=n.length,a=0;if(t!==e)return!1;for(;t>a;a++)if(r[a]!==n[a])return!1;return!0},c.mean=function(n){return arguments.length&&n.length||console.error("Invalid parameter!"),r(n)},c.median=function(r){return arguments.length&&r.length?n(r):(console.error("Invalid parameter!"),void 0)},c.var=function(r){return arguments.length&&r.length?t(r):(console.error("Invalid parameter!"),void 0)},c.std=function(r){return Math.sqrt(c.var(r).val)},c.entropy=function(r,n){2===arguments.length&&r.length?a(r,n):console.error("Invalid parameter!")},c.hist=function(r,n){if(arguments.length&&r&&r.length){var t=n||i(r,"fd");return o(r.sort(c.numeric),t)}},c.hist2=function(r,n,t,e){return arguments.length&&r&&n?(t=t||r,e=e||n,u(r,n,t,e)):void 0},c.intensity=function(){function r(r,i){console.log(i),e=r.append("canvas").attr("width",m).attr("height",l).node(),a=e.getContext("2d"),a.imageSmoothingEnabled=!1,o=a.createImageData(u,f),n(r.datum()),a.putImageData(o,0,0),t()}function n(r){var n,t,e,a,m=u*f,l=0,g=0,v=255;i=c.extrama(r),d.domain([i.min,i.max]);for(var h=o.data;m>l;l++,g+=4)n=d3.rgb(d(r[l])),t=Math.round(n.r),e=Math.round(n.g),a=Math.round(n.b),h[g]=t,h[g+1]=e,h[g+2]=a,h[g+3]=v}function t(){var r=g.domain(),n=g.range(),t=v.domain(),o=v.range();a.drawImage(e,r[0],t[0],r[1]-r[0],t[1]-t[0],n[0],o[0],n[1]-n[0],o[1]-o[0])}var e,a,o,i,u=256,f=256,m=u,l=f,g=d3.scale.linear().domain([0,u]).range([0,m]),v=d3.scale.linear().domain([0,f]).range([0,l]),h=["#000","#eee"],d=d3.scale.linear().range(h);return r.width=function(n){return arguments.length?(u=n,g.domain([0,u]),r):u},r.height=function(n){return arguments.length?(f=n,v.domain([0,f]),r):f},r.canvasWidth=function(n){return arguments.length?(m=n,g.range([0,m]),r):m},r.canvasHeight=function(n){return arguments.length?(l=n,v.range([0,l]),r):l},r},c.vector={},c.vector.add=function(r,n){for(var t=[],e=r.length,a=0;e>a;a++)t.push(r[a]+n[a]);return t},c.vector.subtract=function(r,n){for(var t=[],e=r.length,a=0;e>a;a++)t.push(r[a]-n[a]);return t},c.vector.normSquared=function(r){for(var n=0,t=r.length,e=0;t>e;e++)n+=r[e]*r[e];return n},c.vector.norm=function(r){return Math.sqrt(c.vector.normSquared(r))},c.vector.normalize=function(r){var n=[],t=1/256,e=c.vector.norm(r);if(t>e)return console.error("The vector ["+r+"] has almost zero norm!"),void 0;for(var a=r.length,o=0;a>o;o++)n.push(r[o]/e);return n},c.vector.dot=function(r,n){if(!r||!n)return console.error("Undefined vectors! Returning 0 ..."),0;for(var t=r.length,e=0,a=0;t>a;a++)e+=r[a]*n[a];return e},c.vector.degree=function(r,n){return 360*(c.vector.radian(r,n)/(2*Math.PI))},c.vector.radian=function(r,n){var t=c.vector.normalize,e=c.vector.dot;return Math.acos(e(t(r),t(n)))},"function"==typeof define&&define.amd?define(c):"object"==typeof module&&module.exports?module.exports=c:this.stat=c}();